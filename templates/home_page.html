{%extends "base.html"%}

{%block title%} Navig8 {%endblock%}

{%block link %}     <link rel="icon" href=
"https://media.geeksforgeeks.org/wp-content/cdn-uploads/gfg_200X200.png"
        type="image/x-icon" />
<link rel="stylesheet" href="static/style.css">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
{%endblock%}




{%block user_login%} 

{% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
    {% for category, message in messages %}
    <div class="alert alert-{{ category }}">
        {{ message }}
    </div>
    {% endfor %}
{% endif %}
{% endwith %}

<div class=" header">
    <div class="proj-title " >
        <p class="name-logo">Navig8</p>
    </div>

    <div class="logs">
        {% if "user_name" in session: %} 
            <div style="color: black;">
                <a href="/login"> {{name}}</a>
            </div>
        {%else %}
            <div class="home-login">
                <a href="/login"> Login</a>
            </div>
        {%endif%}
    </div>
    <div>
        <a href="/logout"> Logout</a>
    </div>

</div>

{%endblock%}

{%block content%} 
<h2> this is from the content block</h2>

<hr color="green">
<div class="events-tab">
    <p class="events-div-name">
        Events are as follows
    </p>
    
    {% for event in events %}
        <div class="event">
            <p class="event-title"> {{ event.name }} <span class="uni-name">{{ event.uni_name }}</span></p>
            <div class="flair"> 
                {{ event.flair }}
            </div>
        </div>  
    {% endfor %}
</div>

<div class="events-tab">
    <p class="events-div-name">
        Announcements from our end
    </p>
    
    {% for ann in announcements %}
        <div class="event">
            <p class="event-title"> {{ ann.ann_name }} <span class="uni-name">{{ ann.uni_name }}</span></p>
        </div>
    {% endfor %}
</div>

<div class="container-fluid search-wrapper">
    <label for="search">Search Users</label>
    <input type="search" id="search" data-search>
  </div>
  <div class="container-fluid user-cards" data-user-cards-container></div>

  
  <template data-user-template>
    <div class="anchor-container">

            <div class="card">
                <div class="header-card">
                  <p>
                      Greenfield University
                  </p>
                </div>
                <div class="body">
                  contact@greenfield.edu
                </div>
              </div>
    </div>
  </template>

{%endblock%}

{%block script%} 
<script>
const userCardTemplate = document.querySelector("[data-user-template]")
const userCardContainer = document.querySelector("[data-user-cards-container]")
const searchInput = document.querySelector("[data-search]")

let users = [
  { name: "Greenfield University", email: "contact@greenfield.edu" },
  { name: "Riverside Institute of Technology", email: "info@riversideit.edu" },
  { name: "Mountainview College", email: "admissions@mountainview.edu" },
  { name: "Westwood University", email: "support@westwood.edu" },
  { name: "Summit State College", email: "hello@summitstate.edu" }
]

users.forEach(user => {
  const card = userCardTemplate.content.cloneNode(true).children[0]
  const header = card.querySelector("[data-header]")
  const body = card.querySelector("[data-body]")
  header.textContent = user.name
  body.textContent = user.email
  userCardContainer.append(card)
  user.element = card
})

searchInput.addEventListener("input", e => {
  const value = e.target.value.toLowerCase()
  users.forEach(user => {
    const isVisible =
      user.name.toLowerCase().includes(value) ||
      user.email.toLowerCase().includes(value)
    user.element.classList.toggle("hide", !isVisible)
  })
})



</script>


{%endblock%}